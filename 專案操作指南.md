# 速Per Idol 專案操作指南

本文檔將指導您如何拉取專案、安裝依賴、運行前後端以及如何進行程式碼版本控制。

## 目錄
1. [環境準備](#環境準備)
2. [拉取專案](#拉取專案)
3. [安裝依賴](#安裝依賴)
4. [運行專案](#運行專案)
5. [建立分支與推送程式碼](#建立分支與推送程式碼)
6. [常見問題解決](#常見問題解決)

## 環境準備

在開始之前，請確保您的系統已安裝以下工具：

1. **Git** - 用於版本控制和拉取專案
2. **Node.js** (建議版本 ≥ 18.0.0) 和 **npm** (建議版本 ≥ 8.0.0) - 用於前端開發
3. **Python** (建議版本 3.9+ 或 3.10+) - 用於後端開發
4. **pip** - Python 的套件管理工具
5. **MySQL** (可選) - 如果需要在本地運行數據庫

## 拉取專案

首次取得專案時，請執行以下命令：

```bash
# 使用 HTTPS 方式克隆專案
git clone [專案的 HTTPS URL]

# 或使用 SSH 方式克隆專案（如果已配置 SSH 金鑰）
git clone [專案的 SSH URL]

# 進入專案目錄
cd super-idol
```

## 安裝依賴

本專案分為前端和後端兩部分，需要分別安裝依賴。您可以選擇使用自動腳本或手動安裝：

### 方法 1：使用自動腳本安裝（推薦）

```bash
# 進入腳本目錄
cd super-idol/scripts

# 執行安裝腳本
node setup.js
```

這個腳本會自動：
- 建立必要的目錄結構
- 創建環境變數文件 (.env)
- 安裝前端和後端依賴

### 方法 2：手動安裝

如果自動腳本運行失敗，您可以按照以下步驟手動安裝：

#### 安裝前端依賴

```bash
# 進入前端目錄
cd super-idol/frontend

# 安裝依賴
npm install
```

#### 安裝後端依賴

```bash
# 進入後端目錄
cd super-idol/backend

# 建議使用虛擬環境（可選但推薦）
# Windows:
python -m venv .venv
.venv\Scripts\activate

# macOS/Linux:
python -m venv .venv
source .venv/bin/activate

# 安裝依賴
pip install -r requirements.txt
```

#### 設置環境變數

在 `backend` 目錄中創建 `.env` 文件，並填入以下內容：

```
DB_HOST=superidol.c9i82eygu8mk.ap-southeast-2.rds.amazonaws.com
DB_PORT=3306
DB_USER=DBMS11302
DB_PASSWORD=ilovedbms
DB_NAME=superidol
FLASK_ENV=development
JWT_SECRET_KEY=dev-key-for-local-development
SECRET_KEY=local-dev-secret-key
```

## 運行專案

您可以選擇以下三種方式之一來運行專案：

### 方法 1：同時運行前後端（推薦開發使用）

使用兩個終端分別運行前端和後端：

**終端1 (後端)**:
```bash
# 確保在後端目錄
cd super-idol/backend

# 如果使用虛擬環境，先激活環境
# Windows:
.venv\Scripts\activate
# macOS/Linux:
source .venv/bin/activate

# 運行後端
python run.py
```

**終端2 (前端)**:
```bash
# 確保在前端目錄
cd super-idol/frontend

# 運行前端開發服務器
npm run dev
```

### 方法 2：使用整合腳本

```bash
# 確保在前端目錄或專案根目錄
cd super-idol/frontend
# 或
cd super-idol

# 使用腳本同時啟動前後端
npm run dev:all
```

### 方法 3：使用 Node.js 腳本

```bash
# 在專案根目錄執行
cd super-idol
node scripts/dev.js
```

### 訪問應用

運行成功後，您可以通過以下地址訪問應用：

- 前端界面：http://localhost:5173
- 後端 API：http://localhost:5000
- API測試端點：http://localhost:5000/api/test-cors

## 建立分支與推送程式碼

為了保持專案代碼的整潔和協作的順暢，我們使用 Git 分支來管理開發工作流程。

### 查看當前分支

首先，確認您當前所在的分支：

```bash
git status
```

通常，您會在 `main` 或 `master` 分支上。

### 獲取最新代碼

在創建新分支前，確保您的本地代碼是最新的：

```bash
git pull origin main
```

### 創建並切換到新分支

```bash
# 創建並切換到新分支
# 格式建議: [類型]/[功能名稱]
# 例如: feature/login-page, bugfix/navbar, enhancement/user-profile
git checkout -b feature/your-feature-name
```

常見的分支類型前綴：
- `feature/` - 新功能
- `bugfix/` - 修復 bug
- `enhancement/` - 改進
- `docs/` - 文檔更新
- `test/` - 測試相關

### 開發與提交代碼

在您的分支上進行開發後，提交您的更改：

```bash
# 查看更改的文件
git status

# 添加更改到暫存區
git add .                  # 添加所有更改
# 或
git add [文件路徑]         # 添加特定文件

# 提交更改
git commit -m "描述您所做的更改"
```

### 推送分支到遠程倉庫

首次推送新分支：

```bash
git push -u origin feature/your-feature-name
```

之後的推送：

```bash
git push
```

### 建立合併請求 (Pull Request)

推送完成後，前往 GitHub/GitLab 專案頁面，創建一個新的合併請求 (Pull Request)，將您的分支合併到主分支。

1. 點擊 "New Pull Request" 或 "Create Merge Request"
2. 選擇源分支 (您的分支) 和目標分支 (通常是 main 或 master)
3. 填寫描述，說明您所做的更改
4. 指派審核者
5. 提交 PR

## 常見問題解決

### 1. CORS 跨域問題
- **問題表現**: 前端控制台出現 "Access to fetch at... has been blocked by CORS policy" 錯誤
- **解決方案**: 
   - 確保後端已正確啟動並在 http://localhost:5000 運行
   - 確認 `backend/app/__init__.py` 中的 CORS 設置正確
   - 如果問題持續，可以使用瀏覽器的 CORS 插件臨時禁用 CORS

### 2. 前端 API 連接問題
- **問題表現**: "API 連接失敗，請檢查後端是否運行" 或 "Network Error"
- **解決方案**:
   - 確認後端服務是否正在運行
   - 訪問 http://localhost:5000/api/test-cors 測試 API 是否可用
   - 檢查前端的 API 基礎 URL 設置 (`frontend/src/services/api.js`)

### 3. 端口被佔用
- **問題表現**: 啟動服務時出現 "port already in use" 錯誤
- **解決方案**:
   - 前端: 在 `frontend/vite.config.js` 中修改端口設置
   - 後端: 在 `.env` 文件中添加 `PORT=其他端口號`

### 4. Git 衝突
- **問題表現**: 拉取或合併代碼時出現衝突
- **解決方案**:
   - 手動解決衝突的文件
   - 使用 `git add` 標記衝突已解決
   - 使用 `git commit` 完成合併

### 5. 前端構建失敗
- **問題表現**: `npm run build` 報錯
- **解決方案**:
   - 檢查 npm 和 Node.js 版本是否符合要求
   - 檢查依賴是否正確安裝 (`npm install`)
   - 檢查 `vite.config.js` 配置是否正確

### 6. 後端啟動失敗
- **問題表現**: `python run.py` 報錯
- **解決方案**:
   - 確認 Python 版本是否符合要求
   - 確認所有依賴已安裝 (`pip install -r requirements.txt`)
   - 檢查 `.env` 文件是否存在且配置正確

如有更多問題，請參考專案的 README.md 或聯繫專案維護者。 